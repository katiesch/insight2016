<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
       <meta charset="utf-8">
       <title>Katharine J. Schlesinger - Data Visualisations - San Diego Graffiti </title>
       <meta name="description" content="KJS - Data Visualisations - San Diego">
       <meta name="keywords" content="sandiego,graffiti,insight2016">
        <link href="https://fonts.googleapis.com/css?family=Cabin" rel="stylesheet">
        <link href="sd_styles.css" rel="stylesheet" type="text/css">

        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />
        <link rel="stylesheet" href="http://humangeo.github.com/leaflet-dvf/dist/css/dvf.css" type="text/css" media="screen"/>

        <script src="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>
        <script type="text/javascript" src="sandiego_city_blockgroups_modeladded.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.2.1/chroma.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.0.0/leaflet.ajax.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="sdjs/linspace.js"></script>
<style>

#mapid { height: 650px;
         width: 600px;
       }

.info {
    padding: 6px 8px;
    font: 14px/16px Arial, Helvetica, sans-serif;
    background: white;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 5px;
}
.info h4 {
    margin: 0 0 5px;
    color: #777;
}

.legend {
    line-height: 18px;
    color: #555;
}
.legend i {
    width: 18px;
    height: 18px;
    float: left;
    margin-right: 8px;
    opacity: 0.7;
}

</style>
</head>

<body>
<div id="container">
  <div id="body_background">
  <div id="header">
    <h1>&nbsp</h1>
    <table class="figure" style="float:right; margin-right:45px; margin-top:15px; margin-bottom:0px;">
    <tr><td>
    <img src="headshot.jpg" width="110px;"></td></tr>
    <tr><td>
    </td></tr>
    </table>

    <div id="nav" align="center" style="margin-top:-25px;">
      <p style="font-size:30px;">Katharine J. Schlesinger</p>
      <p style="font-size:16px;">Fellow at Insight Data Science</p>
      <p style="font-size:16px;">kschlesinger@gmail.com</p>
      <br />
      <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="cv_update.pdf">CV</a></li>
      <li><a href="publications.html">Publications/Talks</a></li>
      <li><a href="projects.html" class="current">Projects</a></li>
      <li><a href="other_work.html">Other Work</a></li>
      <li><a href="diversity.html">Equity Issues</a></li>
      <li><a href="links.html">Useful Links</a></li>
      </ul>
    </div>
  </div>

  <div id="mainbody">
     <div id="mainbody_text">

       <h2>Predicting Graffiti Rates in San Diego</h2>
       <i>In partnership with the <a href="https://www.sandiego.gov/pad">City of San Diego
       Performance & Analytics Department</a></i></br>
       <i>2016/09/27</i>

       </br></br>
       <a href="#map_dropdown">Jump straight to the map</a>
       </br>
       
<p>Whether large or small, graffiti has a significant effect on neighborhood quality. At the most basic level, graffiti is quite expensive to repair, costing San Diego upwards of $5 million dollars in a given year<sup><a href="#fn1" id="ref1">1</a></sup>. It also has a detrimental effect on property values and can potentially increase crime rates. According to the Broken Windows theory<sup><a href="#fn2" id="ref2">2</a></sup>, small crimes, such as vandalism, leads to residents disengaging from their neighborhoods. Over time, this community withdrawal makes the area more susceptible to serious crimes.  </p>

<p>San Diego is committed to decreasing graffiti. In June, they
       announced a new <a
       href="https://www.sandiego.gov/get-it-done">"Get It Done"</a>
       reporting system, where citizens can submit reports on a wide
       range of problems, like graffiti, tree hazards, and
       potholes. With this system, city government would like to learn
       more about the range of problems in different municipal areas
       and improve their response time. Response time is particularly
       important for graffiti, as quick clean ups discourage tagging
       activity. People won't go through the effort to tag a wall when
       it will just be cleaned up in a day or two.</p>

<p>Unfortunately, not every area is using the 311 system equally. The
       bulk of the ~20,000 reports stem from a limited number of neighborhoods. Below, we have divided the San Diego municipal area into
       <a
       href="https://en.wikipedia.org/wiki/Census_block_group">Census
       block groups</a>. Overlaid is a heatmap, convolved with a Gaussian, showing the frequency of 311 reports in each area. </p>

  <td><tr><img src="sd_figures/report_distribution_smoothed.png"
    width="600px;"></td></br><pcaption>The distribution of 311 requests
    around San Diego</pcaption></tr>

       
<p>As you can see, most of the reports are clustered around Balboa
  Park downtown; 30% of San Diego's block groups have each filed less
  than 10 reports since the "Get It Done" app has gone live. These areas account for 16% of
  the land area and 26% of the population of San Diego. Critically,
  the city doesn't know if these areas don't have 311 requests because
  things are going well or they have problems and are not reporting
  them. The city could be unaware of serious problems in these
  block groups, resulting in them underserving a large portion of their
  citizens. </p>

<p>Fortunately, we can use the information from blockgroups that
    <b><i>are</i></b> reporting to understand the needs of those that
    <b><i>aren't</i></b>. </p>

<h3>Data Exploration</h3>

<p>I want to search for any possible patterns in reported graffiti in
 San Diego. To do this, I mapped out information from a wide range of
 data sources, including: 
<ul>  
<li> Demographics from the <a href="https://factfinder.census.gov/faces/nav/jsf/pages/programs.xhtml?program=acs">American Community Survey</a>. Among other information, I looked at: <ul>
    <li>Age</li>
    <li>Race and Ethnicity</li>
    <li>Household Income</li>
    <li>English Fluency (as the 311 app is currently only available in
 English)</li>
    <li>Property Values </li>
    <li>Typical rent costs</li>
    </ul></li>
<li> <a href="http://data.sandiego.gov/dataset/get-it-done-requests-311">311 Get It Done Requests</a>, of which ~3000 are graffiti-related</li>
<li> <a href="http://data.sandiego.gov/dataset/code-enforcement-violations">Code Enforcement Violations</a>, including abandoned buildings</li>
<li> <a href="http://www.sandag.org/index.asp?classid=14&subclassid=21&projectid=446&fuseaction=projects.detail">Public Crime Data</a></li>
<li> <a href="http://www.sandag.org/index.asp?fuseaction=home.home">San Diego Infrastructure Information</a> such as: 
    <ul>
    <li>City Street Lights</li>
    <li>Publicly maintained Trees</li>
    <li>Police beats</li>
    </ul>
 </li>
 </ul>
</p>


 <p  id="map_dropdown" >Below is an
 interactive viewer of each of the block groups in San Diego, color
 coded by the property selected in the dropdown menu.</p>

</br>

<p>Select the Information you'd Like to Display:</p>
<div class="options"><select id="field-select">
  <option value="REP_PER_CA">311 Reports per 1000 people</option>
  <option value="COUNT" selected>Number of 311 Reports</option>
  <option value="GRAFFITI_R">Percent of Reports Graffiti-Related</option>
  <option value="PREDICTED_">Predicted Percent of Reports
  Graffiti-Related</option>
  <!--<option value="COMBINED_L">Percentage of Actual and Predicted
  Reports Graffiti-Related</option>-->
  <option value="POPULATION">Population Density (per square mile)</option>
  <option value="TOTAL_POP">Total Population</option>
  <option value="CRIME_PER_">Crime Events per 1000 people</option>
  <option value="MEDIAN_HOU">Median Household Income</option>
  <option value="WHITE_PER">Caucasian Percentage of Population</option>
  <option value="LATIN_PER">Hispanic/Latino Percentage of Population</option>
  <option value="MEDIAN_AGE">Median Age</option>
  <option value="LIMITED_EN">Percentage of Households with Limited English</option>
  <option value="TREE_DENSI">Tree Density (per square mile)</option>
  <option value="SL_DENSITY">Streetlight Density (per square mile)</option>  
  <!--<option value="LAND_AREA">Land Area (square miles)</option>-->
  <!--<option value=""></option>-->
</select>
</div>

</br>
</br>

<div id="mapid"></div>
 
<script type="text/javascript" src="sdjs/mapping.js"></script>


</br>
</br>

<p>
As I explored the data, some interesting patterns emerged. For example:
<ul>
  <li>Both high and low income areas have low reporting rates</li>
  <li>Graffiti reports cluster in location</li>
  <li>There are more reports per person from areas with a larger Caucasian population</li>
</ul></p>

<h3>Designing a Predictive Model</h3>

<p>After looking at the various correlations between my graffiti rate and
other neighborhood characteristics, I combined a series of features
together in a <a
href="http://scikit-learn.org/stable/modules/linear_model.html#ordinary-least-squares">Linear
Regression Model</a>. In its favor, this model is clearly
interpretable, as you can examine the effect each individual feature
has on the overall graffiti rate. This is particularly valuable in this context, as it can help San Diego better understand their graffiti problem. 
However, this model can be severely affected by collinearity. Many of
my features are related to one another, and I thus had to be very
careful while selecting which parameters went into my model. </p>

<p>To train my model, I extracted a sample of blockgroups with a range
of graffiti rates. Each of these blockgroups also has a large number
of reports (more than 22), such that I'm confident that the number of graffiti
reports reflect local conditions. As there are many more blockgroups
with low graffiti reporting rates, I isolate regions where the
graffiti reporting rate is high, more than 40%. I then extract an
equal number of blockgroups where the reporting rate is low, such that
I have a well-balanced training set. Without this balance, my model
will be biased towards low-graffiti rates. </p>

<p>Using careful feature selection and engineering, I create a linear
regression model based on this training set. The data set is quite
sparse, making it difficult to validate my model. As a test, I apply my
model to all remaining blockgroups with a statistically significant
number of reports (>22). When I compare my predicted graffiti rates to
the reported rates for blockgroups in my test set, I find that a <a
href="https://en.wikipedia.org/wiki/Residual_sum_of_squares">residual
sum of squares</a> of 0.05, suggesting that my model is quite a good
fit to the data. When I examine the distribution of the difference
between my predicted and reported graffiti rates, there is a standard
deviation of 17%. Although this is a relatively large percentage, my
model is clearly able to distinguish between high and low graffiti rates. </p>

<h3>Recommendations for the City of San Diego</h3>

<p>Using my machine-learning model, I can predict the graffiti rates
for all the areas in San Diego that are not making use of the 311
system. This information allows the San Diego government to both a)
better market the "Get It Done" system to underreporting areas and b)
anticipate the needs of each neighborhood to ensure a better response time. </p>

  <tr><td><img src="sd_figures/side_by_side.png" width="785px;"></td>
  <pcaption><i>Left:</i> A choropleth map of each block group in San
  Diego, color-coded by the fraction of 311 reports that are
  graffiti-related. The white regions are areas where we have less
  than 22 reports in total; for many of these we have no reports at
  all. <i>Right:</i> The same map but here I have used my predictive
  model to constrain the graffiti rate in each of individual
  blockgroup. You can see that many of the areas where we have few
  reports are expected to have high graffiti rates!</pcaption></tr>

 <h4>Response Time</h4>
<p>Improving response time is critical, as much of the graffiti in San Diego is tagging, where individuals are looking for publicity<sup><a href="#fn1" id="ref1">1</a></sup>. A quick clean up discourages tagging, as it limits the graffiti's exposure time.</p>

<p>Currently, the mean response time is 30 days for all blockgroups in
  San Diego, regardless of their graffiti reporting rate. By
  identifying high graffiti areas, the City can focus their
  maintenance efforts on the areas most in need. </p>

<h4>Streetlights</h4>
<p>City government has also considered adding additional street lights
  to graffiti-ridden areas. The thought is that graffiti is focused in
  darker areas because it is easier to commit a crime in the dark and
  not get caught. I wanted to both test this theory and integrate
  streetlight frequency into my predictive model. Using local infrastructure databases, I
  determined the street light density (e.g., number of streetlights in a square mile) for each block group. <p>

<tr><td><img src="sd_figures/streetlights_map_smoothed.png"
  width="600px;"></td></br>
<pcaption>Distribution of Streetlights in San Diego</pcaption></tr>

<p>Looking at the figure above, and working with the <a
href="#map_dropdown">map</a>, you can see that there is not a strong correlation
between streetlight density and graffiti rates. I suspect that other
demographic factors complicate the analysis;
for example, areas with higher streetlight density are more densely
populated. </p>

<p>In addition, if the majority of graffiti in San Diego is done for publicity,
taggers will want to be close enough to a streetlight that their work
is visible, but far enough that they don't get caught. Thus, looking
at the typical distance between a graffiti event and the nearest
streetlight can provide a more nuanced picture. </p>

<p>In both
  graffiti-rich and -poor areas, the median distance between a
  graffiti event and a streetlight is around 100 feet. This seems
  relatively far from the light. However, when I measure the distance
  between random locations in a block group and the nearest
  streetlight, the value is much higher, around 190 feet. Although
  these points are randomly placed, rather than clustered along a
  street, it indicates that there are many darker locations where
  people could be tagging but they aren't. This suggests that
  streetlights alone are not a strong deterrent against graffiti.</p>

<tr><td><img src="sd_figures/sl_mindist_gper25.png" width="350px;"></td></br>
  <pcaption><i>Red:</i> Mean distance between a graffiti event and a
  streetlight for blockgroups with high graffiti and reporting.
  <i>Black:</i> Mean distance between random locations in each
  blockgroup and the nearest streetlight for areas with high graffiti
  and high reporting rates. </pcaption></tr>

<p>In theory, streetlight outages would be the ideal situation for a
  tagger. You will be able to do your work in the dark but, once the
  streetlight is repaired, it will be clearly visible. Residents can
  report when a streetlight is out via the 311 system, and I looked
  for a correlation between outages and graffiti events. Currently,
  there is no strong correlation between streetlight outages and
  graffiti, but there are only around 1300 outage reports in total. As
  the program continues and the data set expands, we can better search
  for any correlation.</p>

  
<h3>Final Thoughts</h3>

  <p>My predictive model of graffiti rates by blockgroup will allow
  San Diego to focus their maintenance efforts on the areas that need
  it most, improving response time and discouraging tagging. It can also provide
  a useful metric for the city to see the effectiveness of their
  anti-graffiti programs. Finally, it allows the government to see
  neighborhoods where they need to better engage the community with
  the "Get It Done" system. In the future, I can use
  additional data from the 311 system to improve and refine the
  model.</p>
  
  </br>
  </br>
  
<p><a name="fn1">1</a>: <a href="http://www.sandag.org/uploads/publicationid/publicationid_1667_14466.pdf">Graffiti Tracker: An Evaluation of the San Diego County Multi-Discipline Graffiti Abatement program</a> </p>
<p><a name="fn2">2</a>: <a href="https://en.wikipedia.org/wiki/Broken_windows_theory">Broken Windows Theory</a> </p>

   <br />
     </div>
  </div>
  
  <br />
  </div>
 

  
</div>

</body>
</html>
